В решение to be разбиваем монолит на микросервисы, функционал системы:
Микросервисы:
-Сервис пользователей
    Пользователь -> Дом | many to many
-Сервис отопления
    Задать температуру, узнать текущую, сценарий на поддержание заданной температуры по расписанию
-Сервис освещения
    Включить/выключить свет, сценарий на вкл/выкл по расписанию
-Сервис ворот
    Открытие, закрытие ворот, сценарий на откр/закр по расписанию
-Сервис видеонаблюдения
    Стриминг, хранение/просмотр видео
Все обращение пользователя идут через Api Gateway по REST, от фронта. Kafka не используется.
Каждый микросервис имеет свою собственную БД.
Взаимодействия между микросервисами нету. Каждый микросервис имеет свои сценарии,
Запуск сценариев микросервиса по расписанию.
Добавил телеметрию: Администратор системы создает системные-сценарии в каждой системе, которые сохраняются по времени например:
1. сохранять каждую минуту температуру на устройстве
2. записывать когда включили/выключили свет, если это датчик движение/либо датчик "темноты" для улицы.
Все системные сценарии добавляются в тот же обработчик, и устройства опрашиваются по заданному таймингу.